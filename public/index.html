<!doctype html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agar.io Simplegame</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <style>
      .card label { display:block; margin:6px 0 4px; color:#8b949e; }
      .card input[type=text], .card input[type=password] { width:100%; padding:8px 10px; border-radius:8px; border:1px solid #30363d; background:#0b0f14; color:#fff; }
    </style>
  </head>
  <body class="page">
    <div class="container">
      <h1 class="title">Agar.io Simplegame (Vercel)</h1>
      <div class="grid two">
        <div class="card">
          <h2>Buat Room</h2>
          <form id="createRoom">
            <label>Nama kamu</label>
            <input id="name1" type="text" maxlength="16" required />
            <label style="display:inline-flex;align-items:center;gap:8px;margin-top:8px;">
              <input id="vsbot" type="checkbox" /> VS Komputer
            </label>
            <button class="btn" type="submit" style="margin-top:10px;">Buat</button>
          </form>
        </div>
        <div class="card">
          <h2>Gabung Room</h2>
          <form id="joinRoom">
            <label>Nama kamu</label>
            <input id="name2" type="text" maxlength="16" required />
            <label>Kode Room</label>
            <input id="code" type="text" maxlength="12" placeholder="ABC123" required />
            <button class="btn" type="submit" style="margin-top:10px;">Join</button>
          </form>
        </div>
      </div>
    </div>
    <script>
      const createForm = document.getElementById('createRoom');
      createForm.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const name = document.getElementById('name1').value.trim();
        const vsbot = document.getElementById('vsbot').checked;
        const res = await fetch('/api/create-room', { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify({ username: name, vsBot: vsbot }) });
        const data = await res.json();
        if (!data.ok) { alert('Gagal membuat room'); return; }
        const code = data.code;
        window.location.href = `/room/${code}?name=${encodeURIComponent(name)}&vsbot=${vsbot?'1':'0'}`;
      });
      const joinForm = document.getElementById('joinRoom');
      joinForm.addEventListener('submit',(e)=>{
        e.preventDefault();
        const name = document.getElementById('name2').value.trim();
        const code = document.getElementById('code').value.trim().toUpperCase();
        window.location.href = `/room/${code}?name=${encodeURIComponent(name)}`;
      });
    </script>
  </body>
  </html>


